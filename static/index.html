<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transpalentor - 画像透過処理アプリ</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <!-- ヘッダー -->
    <header class="app-header">
        <div class="header-container">
            <div class="header-brand">
                <span class="brand-logo">🎨</span>
                <h1 class="brand-title">Transpalentor</h1>
            </div>
            <nav class="header-nav">
                <a href="#" class="nav-link active">ホーム</a>
                <a href="#about" class="nav-link">使い方</a>
                <a href="https://github.com" target="_blank" class="nav-link">GitHub</a>
            </nav>
        </div>
    </header>

    <div id="app">
        <div class="page-header">
            <h2 class="page-title">画像透過処理</h2>
            <p class="page-description">色を指定して画像を透明化できます</p>
        </div>

        <!-- アップロードセクション -->
        <div class="upload-section">
            <div class="file-input-wrapper">
                <input type="file" id="fileInput" accept="image/png,image/jpeg,image/bmp">
                <label for="fileInput" class="upload-btn" id="uploadBtn">
                    画像を選択
                </label>
            </div>
        </div>

        <!-- ローディング表示 -->
        <div id="loading" class="loading">
            <div class="spinner"></div>
            <p>処理中...</p>
        </div>

        <!-- エラーメッセージ -->
        <div id="errorMessage" class="error-message"></div>

        <!-- プレビューセクション -->
        <div id="previewSection" class="preview-section">
            <div class="color-picker-section">
                <h3>透過する色を選択</h3>
                <div class="color-controls">
                    <button id="eyedropperBtn" class="eyedropper-btn">
                        🎨 スポイトで色を選択
                    </button>

                    <div class="rgb-input">
                        <label>RGB:</label>
                        <input type="number" id="rgbR" min="0" max="255" placeholder="R" value="255">
                        <input type="number" id="rgbG" min="0" max="255" placeholder="G" value="255">
                        <input type="number" id="rgbB" min="0" max="255" placeholder="B" value="255">
                    </div>

                    <div class="threshold-input">
                        <label for="threshold">色の許容範囲:</label>
                        <input type="range" id="threshold" min="0" max="100" value="30">
                        <span id="thresholdValue" class="threshold-value">30</span>
                        <span class="threshold-hint">（値が大きいほど広範囲の色を透明化）</span>
                    </div>

                    <div class="color-preview">
                        <div id="colorBox" class="color-box"></div>
                        <span id="colorValue" class="color-value">RGB(-, -, -)</span>
                    </div>

                    <button id="processBtn" class="process-btn" disabled>
                        透過処理を実行
                    </button>
                </div>
            </div>

            <!-- ツール選択セクション -->
            <div id="toolSection" class="tool-section" style="display: none;">
                <h3>ツールを選択</h3>
                <div class="tool-controls">
                    <button id="eyedropperToolBtn" class="tool-btn active">
                        🎨 スポイトツール
                    </button>
                    <button id="eraserToolBtn" class="tool-btn">
                        🧹 消しゴムツール
                    </button>
                </div>

                <!-- 消しゴムツールオプション -->
                <div id="eraserOptions" class="eraser-options" style="display: none;">
                    <label>ブラシサイズ:</label>
                    <div class="brush-sizes">
                        <button class="brush-size-btn active" data-size="5">小</button>
                        <button class="brush-size-btn" data-size="10">中</button>
                        <button class="brush-size-btn" data-size="20">大</button>
                        <button class="brush-size-btn" data-size="40">特大</button>
                    </div>
                    <span class="tool-hint">処理後の画像上でドラッグして消しゴムを使用できます</span>
                </div>
            </div>

            <div class="preview-container">
                <div class="preview-box">
                    <h3>元画像</h3>
                    <div class="image-wrapper">
                        <img id="originalImage" src="" alt="元画像">
                    </div>
                </div>

                <div class="preview-box">
                    <h3>処理後</h3>
                    <div class="image-wrapper canvas-container">
                        <img id="processedImage" src="" alt="処理後の画像">
                        <canvas id="eraserCanvas"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- フッター -->
    <footer class="app-footer">
        <div class="footer-container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4 class="footer-heading">Transpalentor</h4>
                    <p class="footer-text">画像の色指定による透過処理アプリケーション</p>
                </div>
                <div class="footer-section">
                    <h4 class="footer-heading">リンク</h4>
                    <ul class="footer-links">
                        <li><a href="#" class="footer-link">使い方</a></li>
                        <li><a href="https://github.com" target="_blank" class="footer-link">GitHub</a></li>
                        <li><a href="#" class="footer-link">お問い合わせ</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4 class="footer-heading">技術スタック</h4>
                    <p class="footer-text">FastAPI • Python • Pillow • JavaScript</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p class="footer-copyright">© 2024 Transpalentor. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="/static/js/app.js"></script>
</body>
</html>
